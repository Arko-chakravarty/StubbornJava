// {{start:dependencies}}

apply plugin: 'com.google.cloud.tools.jib'

dependencies {
    // Project reference
    compile project(':stubbornjava-undertow')
    compile project(':stubbornjava-common')
    compile project(':stubbornjava-cms-server')

    compile libs.romeRss
    
    compileOnly libs.lombok
    annotationProcessor libs.lombok

    testCompile libs.junit
}

jib {
  //containerizingMode = 'packaged'
  from {
    image = 'adoptopenjdk/openjdk11:alpine-jre'
  }
  // to {
  //   image = 'localhost:5000/my-image/built-with-jib'
  //   credHelper = 'osxkeychain'
  //   tags = ['tag2', 'latest']
  // }
  container {
    jvmFlags = ['-Denv=PROD']
    mainClass = 'com.stubbornjava.webapp.StubbornJavaWebApp'
    // args = ['some', 'args']
    ports = ['8080', '8080/tcp']
    // labels = [key1:'value1', key2:'value2']
    // format = 'OCI'
  }
}

// {{end:dependencies}}
